---
title: "Datasets"
author: "Luke Zappia"
date: '`r Sys.Date()`'
output: html_document
---

Code version: `r system("git log -1 --format=oneline | cut -d' ' -f1", intern = TRUE)`

```{r knitr, include = FALSE}
DOCNAME = "datasets"
knitr::opts_chunk$set(autodep        = TRUE,
                      cache          = TRUE,
                      cache.path     = paste0("cache/", DOCNAME, "/"),
                      cache.comments = TRUE,
                      echo           = FALSE,
                      error          = FALSE,
                      fig.align      = "center",
                      fig.path       = paste0("figures/", DOCNAME, "/"),
                      fig.width      = 10,
                      fig.height     = 8,
                      dev            = c('svg', 'png'),
                      message        = FALSE,
                      warning        = FALSE)
```

```{r libraries, cache = FALSE}
# RNA-seq
library("scater")
library("splatter")

# Plotting
library("mcriPalettes")
library("cowplot")

library("tidyverse")
```

```{r source, cache = FALSE}
source("../R/load_datasets.R")
```

```{r ggtheme, cache = FALSE}
#theme_doc <- ggplot2::theme_minimal(base_size = 18) +
#             ggplot2::theme(panel.grid = ggplot2::element_blank(),
#                            plot.title = ggplot2::element_text(size = 30))
#ggplot2::theme_set(theme_doc)

my.pal <- mcriPalettes::mcriPalette("themes")
my.pal[4] <- "#F7DC5F"
```

Introduction
============

In this document we are going to load multiple real datasets, estimate
parameters for the various simulations, simulate new datasets and compare them
to the real data.

Data
====

We have a variety of real datasets we could use. Let's load the metadata file
and take a look.

```{r datasets}
root <- "/group/bioi1/shared/public_data/scRNA-seq"
datasets <- read_tsv(file.path(root, "datasets.txt"),
                     col_types = cols(.default = col_character(),
                                      NumCells = col_integer()
                                      )
                     )
datasets
```

```{r}
cc <- apply(datasets, 1, loadDataset, root = root)
```



Session info
============

```{r session-info, cache = FALSE}
devtools::session_info()
```

```{r cleanup-docs, cache = FALSE}
doc.files <- c(list.files(pattern = "pdf"),
               list.files(pattern = "html"),
               list.files(pattern = "docx"))

for (file in doc.files) {
    file.rename(file, file.path("docs", file))
}
```

